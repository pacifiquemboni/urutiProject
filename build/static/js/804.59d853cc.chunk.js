"use strict";(self.webpackChunkvuna_deile=self.webpackChunkvuna_deile||[]).push([[804],{78468:(e,s,i)=>{i.d(s,{A:()=>d});var n=i(39338),l=i(42215),a=i(47472),r=i(14710),t=i(91046);const d=function(e){var s,i,d,o;let{children:c,roles:u=[],permission:m,otherwise:h,fallback:p,...x}=e;const{good:v,bad:j}=(0,n.S)(u),{good:g,bad:y}=(0,n.S)(m?Array.isArray(m)?m:[m]:[""]),{user:b,status:f,allowedPermissions:A}=(0,l.G)((e=>e.user));return"pending"==f||"pending"==A.status?(0,t.jsx)(a.A,{}):(m?(null===A||void 0===A||null===(s=A.list)||void 0===s?void 0:s.some((e=>g.includes(e))))&&(null===A||void 0===A||null===(i=A.list)||void 0===i||!i.some((e=>y.includes(e)))):0===u.length||j.length&&!j.includes(null===b||void 0===b||null===(d=b.role)||void 0===d?void 0:d.toLowerCase())||v.length&&(null===v||void 0===v?void 0:v.includes(null===b||void 0===b||null===(o=b.role)||void 0===o?void 0:o.toLowerCase())))?(0,t.jsx)(r.Fragment,{...x,children:c}):h||(p?(0,t.jsx)(r.Fragment,{...x,children:p}):(0,t.jsx)(r.Fragment,{...x}))}},16330:(e,s,i)=>{i.d(s,{A:()=>t,w:()=>d});var n=i(62979),l=i.n(n),a=i(76194),r=i(91046);function t(e){let{children:s,isOpen:i,onRequestClose:n,className:a,size:t}=e;return(0,r.jsx)(l(),{isOpen:i,onRequestClose:n,className:`${t?`size_${t}`:""} ${a||""}`,children:s})}function d(e){let{onClose:s,title:i}=e;return(0,r.jsxs)("div",{className:"flex justify-between mb-4",children:["string"==typeof i?(0,r.jsx)("h3",{children:i}):i,(0,r.jsx)(a.A,{className:"!text-black !bg-transparent !p-0",size:"xsm2",onClick:()=>s(),children:"X"})]})}l().setAppElement("#modals")},7804:(e,s,i)=>{i.r(s),i.d(s,{default:()=>N});var n=i(30059),l=i(99679),a=i(42215),r=i(14710),t=i(79688),d=i(78468),o=i(76194),c=i(94055),u=i(16330),m=i(69167),h=i(95834),p=i(47098),x=i(98510),v=i(18345),j=i(94949),g=i(91046);function y(){const[e,s]=(0,r.useState)(!1),i=(0,a.j)(),l=(0,r.useCallback)((async(e,s)=>{let{setErrors:l,setStatus:a,setSubmitting:r,setTouched:t,resetForm:d}=s;try{const{submit:s,...l}=e;await i((0,n.of)({data:l})).unwrap(),r(!1),a({success:!0}),t({}),d()}catch(o){a({success:!1}),l({submit:o.message||"Something went wrong, please try again."}),r(!1)}}),[i]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{onClick:()=>s(!0),className:"flex items-center justify-center gap-2 p-3 py-5 rounded-md border border-dashed text-primary border-primary border-opacity-30 cursor-pointer",children:[(0,g.jsx)(m.A,{}),(0,g.jsx)("p",{children:"Add Permission"})]}),(0,g.jsxs)(u.A,{isOpen:e,onRequestClose:()=>s(!1),size:"sm",children:[(0,g.jsx)(u.w,{title:"Add Permission",onClose:()=>s(!1)}),(0,g.jsx)(v.l1,{initialValues:{name:"",description:"",submit:null},validationSchema:j.Ik().shape({name:j.Yj().max(50).required("Name is required"),description:j.Yj().min(5).max(100).required("Description is required")}),onSubmit:l,children:e=>{let{errors:s,handleBlur:i,handleChange:n,handleSubmit:l,isSubmitting:a,touched:r,values:t}=e;return(0,g.jsxs)("form",{method:"post",className:"flex flex-col gap-4 justify-center [&_input]:!rounded-xl",onSubmit:l,children:[s.submit?(0,g.jsx)("p",{className:"text-red-500 -my-2",children:s.submit}):(0,g.jsx)("p",{className:"text-transparent select-none -my-2",children:"error"}),(0,g.jsx)(c.pd,{name:"name",label:"Name",placeholder:"Enter Name",autoComplete:"name",onChange:n,onBlur:i,value:t.name,error:s.name,isTouched:Boolean(r.name),required:!0}),(0,g.jsx)(c.pd,{name:"description",label:"Description",placeholder:"Enter description",error:s.description,value:t.description,onChange:n,onBlur:i,isTouched:Boolean(r.description),required:!0}),(0,g.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,g.jsx)(o.A,{type:"reset",outlined:!0,disabled:a,size:"xsm",className:"!rounded-full",children:"Cancel"}),(0,g.jsx)(o.A,{type:"submit",disabled:a,size:"xsm",className:"!rounded-full",icon:a&&(0,g.jsx)(h.A,{color:"inherit",size:16}),children:"Add Permission"})]})]})}})]})]})}function b(e){let{data:s}=e;const[i,l]=(0,r.useState)(!1),t=(0,a.j)(),d=(0,r.useCallback)((async(e,i)=>{let{setErrors:l,setStatus:a,setSubmitting:r,setTouched:d,resetForm:o}=i;try{const{submit:i,...l}=e;await t((0,n.Oo)({data:l,id:null===s||void 0===s?void 0:s.id})).unwrap(),r(!1),a({success:!0}),d({}),o()}catch(c){a({success:!1}),l({submit:c.message||"Something went wrong, please try again."}),r(!1)}}),[null===s||void 0===s?void 0:s.id,t]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{onClick:()=>l(!0),className:"flex items-center justify-center cursor-pointer",children:(0,g.jsx)(p.A,{className:"text-grey size-5"})}),(0,g.jsxs)(u.A,{isOpen:i,onRequestClose:()=>l(!1),size:"sm",children:[(0,g.jsx)(u.w,{title:"Edit Permission",onClose:()=>l(!1)}),(0,g.jsx)(v.l1,{initialValues:{name:null===s||void 0===s?void 0:s.name,description:null===s||void 0===s?void 0:s.description,submit:null},validationSchema:j.Ik().shape({name:j.Yj().max(50).required("Name is required"),description:j.Yj().min(5).max(100).required("Description is required")}),onSubmit:d,children:e=>{let{errors:s,handleBlur:i,handleChange:n,handleSubmit:l,resetForm:a,isSubmitting:r,touched:t,values:d}=e;return(0,g.jsxs)("form",{method:"post",className:"flex flex-col gap-4 justify-center [&_input]:!rounded-xl",onSubmit:l,children:[s.submit?(0,g.jsx)("p",{className:"text-red-500 -my-2",children:s.submit}):(0,g.jsx)("p",{className:"text-transparent select-none -my-2",children:"error"}),(0,g.jsx)(c.pd,{name:"name",label:"Name",placeholder:"Enter Name",autoComplete:"name",onChange:n,onBlur:i,value:d.name,error:s.name,isTouched:Boolean(t.name),readOnly:!0,required:!0}),(0,g.jsx)(c.pd,{name:"description",label:"Description",placeholder:"Enter description",error:s.description,value:d.description,onChange:n,onBlur:i,isTouched:Boolean(t.description),required:!0}),(0,g.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,g.jsx)(o.A,{outlined:!0,disabled:r,onClick:()=>a(),size:"xsm",className:"!rounded-full",children:"Cancel"}),(0,g.jsx)(o.A,{type:"submit",disabled:r,size:"xsm",className:"!rounded-full",icon:r&&(0,g.jsx)(h.A,{color:"inherit",size:16}),children:"Edit Permission"})]})]})}})]})]})}function f(e){let{data:s}=e;const[i,l]=(0,r.useState)(!1),[t,d]=(0,r.useState)(!1),c=(0,a.j)(),m=(0,r.useCallback)((async()=>{d(!0);try{await c((0,n.e$)({id:null===s||void 0===s?void 0:s.id})).unwrap()}catch(e){}d(!1)}),[null===s||void 0===s?void 0:s.id,c]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{onClick:()=>l(!0),className:"flex items-center justify-center cursor-pointer",children:(0,g.jsx)(x.A,{className:"text-red-400 size-5"})}),(0,g.jsxs)(u.A,{isOpen:i,onRequestClose:()=>l(!1),size:"sm",children:[(0,g.jsx)(u.w,{title:"Delete Permission",onClose:()=>l(!1)}),(0,g.jsxs)("p",{children:["Are you sure you want to delete ",(0,g.jsx)("br",{}),"permission ",(0,g.jsx)("b",{children:null===s||void 0===s?void 0:s.name})]}),(0,g.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,g.jsx)(o.A,{outlined:!0,disabled:t,onClick:()=>l(!1),size:"xsm",className:"!rounded-full",children:"No, thanks"}),(0,g.jsx)(o.A,{onClick:m,disabled:t,size:"xsm",className:"!rounded-full",icon:t&&(0,g.jsx)(h.A,{color:"inherit",size:16}),children:"Yes, Delete"})]})]})]})}function A(e){let{page:s,loading:i}=e;return i?(0,g.jsx)("div",{className:"w-full flex justify-center",children:(0,g.jsx)(t.A,{})}):(0,g.jsxs)("div",{className:"grid gap-2 grid-cols-[repeat(auto-fill,_minmax(min(100%,15rem),1fr))]",children:[(0,g.jsx)(d.A,{permission:"view_roles",children:s.map((e=>{var s,i,n;return(0,g.jsxs)("div",{className:"py-3 px-4 rounded-md bg-light-grey bg-opacity-40",children:[(0,g.jsx)("p",{children:null===e||void 0===e||null===(i=e.original)||void 0===i?void 0:i.name}),(0,g.jsx)("small",{className:"text-grey block pt-2",children:null===e||void 0===e||null===(n=e.original)||void 0===n?void 0:n.description}),(0,g.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,g.jsx)(f,{data:null===e||void 0===e?void 0:e.original}),(0,g.jsx)(b,{data:null===e||void 0===e?void 0:e.original})]})]},null===e||void 0===e||null===(s=e.original)||void 0===s?void 0:s.id)}))}),(0,g.jsx)(d.A,{permission:"create_roles",children:(0,g.jsx)(y,{})})]})}function N(){const e=(0,a.j)(),{list:s,status:i,info:t}=(0,a.G)((e=>e.permissions)),d=(0,r.useMemo)((()=>[{accessor:"name",Header:"name"},{accessor:"description",Header:"description"}]),[]),o=(0,r.useCallback)((async()=>{try{await e((0,n.vU)()).unwrap()}catch(s){}}),[e]);return(0,r.useLayoutEffect)((()=>{0==s.length&&o()}),[o,s.length]),(0,g.jsx)("div",{className:"p-4 min-h-full",children:(0,g.jsx)(l.A,{title:"Permissions",columns:d,data:s,loading:"pending"==i,refresh:()=>o(),hidePagination:!0,defaultPageSize:100,totalResults:null===t||void 0===t?void 0:t.total,CustomTable:e=>(0,g.jsx)(A,{...e})})})}},95834:(e,s,i)=>{i.d(s,{A:()=>n});var n=(0,i(79).A)("circle","IconCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}]])},47098:(e,s,i)=>{i.d(s,{A:()=>n});var n=(0,i(79).A)("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]])},69167:(e,s,i)=>{i.d(s,{A:()=>n});var n=(0,i(79).A)("new-section","IconNewSection",[["path",{d:"M9 12l6 0",key:"svg-0"}],["path",{d:"M12 9l0 6",key:"svg-1"}],["path",{d:"M4 6v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1m-5 0h-2m-5 0h-1a1 1 0 0 1 -1 -1v-1m0 -5v-2m0 -5",key:"svg-2"}]])},98510:(e,s,i)=>{i.d(s,{A:()=>n});var n=(0,i(79).A)("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]])}}]);
//# sourceMappingURL=804.59d853cc.chunk.js.map