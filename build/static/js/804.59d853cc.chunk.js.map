{"version":3,"file":"static/js/804.59d853cc.chunk.js","mappings":"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","sources":["components/etc/CheckRoles.tsx","components/modal/index.tsx","pages/dashboard/permissions/actions.tsx","pages/dashboard/permissions/list.tsx","pages/dashboard/permissions/index.tsx","../node_modules/.pnpm/@tabler+icons-react@2.47.0_react@18.3.1/node_modules/@tabler/icons-react/src/icons/IconCircle.js","../node_modules/.pnpm/@tabler+icons-react@2.47.0_react@18.3.1/node_modules/@tabler/icons-react/src/icons/IconEdit.js","../node_modules/.pnpm/@tabler+icons-react@2.47.0_react@18.3.1/node_modules/@tabler/icons-react/src/icons/IconNewSection.js","../node_modules/.pnpm/@tabler+icons-react@2.47.0_react@18.3.1/node_modules/@tabler/icons-react/src/icons/IconTrash.js"],"sourcesContent":["import { filterRoles } from \"@helpers/filterRoles\";\r\nimport { useAppSelector } from \"@redux/hook\";\r\nimport { Spin } from \"antd\";\r\nimport { Fragment, ReactNode } from \"react\";\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  roles?: string[];\r\n  permission?: string | string[];\r\n  otherwise?: ReactNode | any;\r\n  fallback?: ReactNode;\r\n  [keys: string]: any; // any props that come into the component\r\n}\r\n\r\nfunction CheckRole({ children, roles = [], permission, otherwise, fallback, ...props }: Props) {\r\n  const { good, bad } = filterRoles(roles);\r\n  const { good: menuGood, bad: menuBad } = filterRoles(\r\n    !permission ? [\"\"] : Array.isArray(permission) ? permission : [permission],\r\n  );\r\n  const { user, status, allowedPermissions } = useAppSelector((state) => state.user);\r\n\r\n  if (status == \"pending\" || allowedPermissions.status == \"pending\") return <Spin />;\r\n\r\n  if (\r\n    permission\r\n      ? allowedPermissions?.list?.some((r) => menuGood.includes(r)) &&\r\n        !allowedPermissions?.list?.some((r) => menuBad.includes(r))\r\n      : roles.length === 0 ||\r\n        (bad.length && !bad.includes(user?.role?.toLowerCase())) ||\r\n        (good.length && good?.includes(user?.role?.toLowerCase()))\r\n  )\r\n    return <Fragment {...props}>{children}</Fragment>;\r\n\r\n  if (otherwise) return otherwise;\r\n\r\n  if (fallback) return <Fragment {...props}>{fallback}</Fragment>;\r\n  return <Fragment {...props} />;\r\n}\r\n\r\nexport default CheckRole;\r\n","import { ReactNode } from \"react\";\r\nimport ReactModal from \"react-modal\";\r\nimport Button from \"../button\";\r\n\r\nReactModal.setAppElement(\"#modals\");\r\n\r\ntype props = {\r\n  children: ReactNode;\r\n  isOpen: boolean;\r\n  className?: string;\r\n  size?: \"sm\" | \"conner\";\r\n  onRequestClose: (\r\n    event: React.MouseEvent<Element, MouseEvent> | React.KeyboardEvent<Element>,\r\n  ) => void;\r\n};\r\n\r\nexport default function Modal({ children, isOpen, onRequestClose, className, size }: props) {\r\n  return (\r\n    <ReactModal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      className={`${size ? `size_${size}` : \"\"} ${className || \"\"}`}\r\n    >\r\n      {children}\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\ntype modelTitle = {\r\n  title?: ReactNode | string;\r\n  onClose: CallableFunction;\r\n};\r\n\r\nexport function ModalTitle({ onClose, title }: modelTitle) {\r\n  return (\r\n    <div className=\"flex justify-between mb-4\">\r\n      {typeof title == \"string\" ? <h3>{title}</h3> : title}\r\n      <Button className=\"!text-black !bg-transparent !p-0\" size=\"xsm2\" onClick={() => onClose()}>\r\n        X\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n","import Button from \"@/components/button\";\r\nimport { Input } from \"@/components/form\";\r\nimport Modal, { ModalTitle } from \"@/components/modal\";\r\nimport {\r\n  AddPermissionsThunk,\r\n  DeletePermissionsThunk,\r\n  UpdatePermissionsThunk,\r\n} from \"@/redux/features/actions/permissions\";\r\nimport { useAppDispatch } from \"@/redux/hook\";\r\nimport { IconCircle, IconEdit, IconNewSection, IconTrash } from \"@tabler/icons-react\";\r\nimport { Formik, FormikHelpers } from \"formik\";\r\nimport { useCallback, useState } from \"react\";\r\nimport * as Yup from \"yup\";\r\n\r\nexport function Add() {\r\n  const [open, setOpen] = useState(false);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const submit = useCallback(\r\n    async (\r\n      values: any,\r\n      { setErrors, setStatus, setSubmitting, setTouched, resetForm }: FormikHelpers<any>,\r\n    ) => {\r\n      try {\r\n        const { submit, ...data } = values;\r\n\r\n        await dispatch(AddPermissionsThunk({ data })).unwrap();\r\n        setSubmitting(false);\r\n        setStatus({ success: true });\r\n        setTouched({});\r\n        resetForm();\r\n      } catch (err: any) {\r\n        setStatus({ success: false });\r\n        setErrors({ submit: err.message || \"Something went wrong, please try again.\" });\r\n        setSubmitting(false);\r\n      }\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        onClick={() => setOpen(true)}\r\n        className=\"flex items-center justify-center gap-2 p-3 py-5 rounded-md border border-dashed text-primary border-primary border-opacity-30 cursor-pointer\"\r\n      >\r\n        <IconNewSection />\r\n        <p>Add Permission</p>\r\n      </div>\r\n      <Modal isOpen={open} onRequestClose={() => setOpen(false)} size=\"sm\">\r\n        <ModalTitle title=\"Add Permission\" onClose={() => setOpen(false)} />\r\n        <Formik\r\n          initialValues={{ name: \"\", description: \"\", submit: null }}\r\n          validationSchema={Yup.object().shape({\r\n            name: Yup.string().max(50).required(\"Name is required\"),\r\n            description: Yup.string().min(5).max(100).required(\"Description is required\"),\r\n          })}\r\n          onSubmit={submit}\r\n        >\r\n          {({ errors, handleBlur, handleChange, handleSubmit, isSubmitting, touched, values }) => {\r\n            return (\r\n              <form\r\n                method=\"post\"\r\n                className=\"flex flex-col gap-4 justify-center [&_input]:!rounded-xl\"\r\n                onSubmit={handleSubmit}\r\n              >\r\n                {errors.submit ? (\r\n                  <p className=\"text-red-500 -my-2\">{errors.submit}</p>\r\n                ) : (\r\n                  <p className=\"text-transparent select-none -my-2\">error</p>\r\n                )}\r\n                <Input\r\n                  name=\"name\"\r\n                  label=\"Name\"\r\n                  placeholder=\"Enter Name\"\r\n                  autoComplete=\"name\"\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  value={values.name}\r\n                  error={errors.name}\r\n                  isTouched={Boolean(touched.name)}\r\n                  required\r\n                />\r\n                <Input\r\n                  name=\"description\"\r\n                  label=\"Description\"\r\n                  placeholder=\"Enter description\"\r\n                  error={errors.description}\r\n                  value={values.description}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  isTouched={Boolean(touched.description)}\r\n                  required\r\n                />\r\n                <div className=\"flex justify-end pt-2 gap-2\">\r\n                  <Button\r\n                    type=\"reset\"\r\n                    outlined\r\n                    disabled={isSubmitting}\r\n                    size=\"xsm\"\r\n                    className=\"!rounded-full\"\r\n                  >\r\n                    Cancel\r\n                  </Button>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    disabled={isSubmitting}\r\n                    size=\"xsm\"\r\n                    className=\"!rounded-full\"\r\n                    icon={isSubmitting && <IconCircle color=\"inherit\" size={16} />}\r\n                  >\r\n                    Add Permission\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            );\r\n          }}\r\n        </Formik>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport function Edit({ data }: { data: any }) {\r\n  const [open, setOpen] = useState(false);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const submit = useCallback(\r\n    async (\r\n      values: any,\r\n      { setErrors, setStatus, setSubmitting, setTouched, resetForm }: FormikHelpers<any>,\r\n    ) => {\r\n      try {\r\n        const { submit, ...v } = values;\r\n\r\n        await dispatch(UpdatePermissionsThunk({ data: v, id: data?.id })).unwrap();\r\n        setSubmitting(false);\r\n        setStatus({ success: true });\r\n        setTouched({});\r\n        resetForm();\r\n      } catch (err: any) {\r\n        setStatus({ success: false });\r\n        setErrors({ submit: err.message || \"Something went wrong, please try again.\" });\r\n        setSubmitting(false);\r\n      }\r\n    },\r\n    [data?.id, dispatch],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        onClick={() => setOpen(true)}\r\n        className=\"flex items-center justify-center cursor-pointer\"\r\n      >\r\n        <IconEdit className=\"text-grey size-5\" />\r\n      </div>\r\n      <Modal isOpen={open} onRequestClose={() => setOpen(false)} size=\"sm\">\r\n        <ModalTitle title=\"Edit Permission\" onClose={() => setOpen(false)} />\r\n        <Formik\r\n          initialValues={{ name: data?.name, description: data?.description, submit: null }}\r\n          validationSchema={Yup.object().shape({\r\n            name: Yup.string().max(50).required(\"Name is required\"),\r\n            description: Yup.string().min(5).max(100).required(\"Description is required\"),\r\n          })}\r\n          onSubmit={submit}\r\n        >\r\n          {({\r\n            errors,\r\n            handleBlur,\r\n            handleChange,\r\n            handleSubmit,\r\n            resetForm,\r\n            isSubmitting,\r\n            touched,\r\n            values,\r\n          }) => {\r\n            return (\r\n              <form\r\n                method=\"post\"\r\n                className=\"flex flex-col gap-4 justify-center [&_input]:!rounded-xl\"\r\n                onSubmit={handleSubmit}\r\n              >\r\n                {errors.submit ? (\r\n                  <p className=\"text-red-500 -my-2\">{errors.submit}</p>\r\n                ) : (\r\n                  <p className=\"text-transparent select-none -my-2\">error</p>\r\n                )}\r\n                <Input\r\n                  name=\"name\"\r\n                  label=\"Name\"\r\n                  placeholder=\"Enter Name\"\r\n                  autoComplete=\"name\"\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  value={values.name}\r\n                  error={errors.name as any}\r\n                  isTouched={Boolean(touched.name)}\r\n                  readOnly\r\n                  required\r\n                />\r\n                <Input\r\n                  name=\"description\"\r\n                  label=\"Description\"\r\n                  placeholder=\"Enter description\"\r\n                  error={errors.description as any}\r\n                  value={values.description}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  isTouched={Boolean(touched.description)}\r\n                  required\r\n                />\r\n                <div className=\"flex justify-end pt-2 gap-2\">\r\n                  <Button\r\n                    outlined\r\n                    disabled={isSubmitting}\r\n                    onClick={() => resetForm()}\r\n                    size=\"xsm\"\r\n                    className=\"!rounded-full\"\r\n                  >\r\n                    Cancel\r\n                  </Button>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    disabled={isSubmitting}\r\n                    size=\"xsm\"\r\n                    className=\"!rounded-full\"\r\n                    icon={isSubmitting && <IconCircle color=\"inherit\" size={16} />}\r\n                  >\r\n                    Edit Permission\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            );\r\n          }}\r\n        </Formik>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport function Delete({ data }: { data: any }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [isSubmitting, setSubmitting] = useState(false);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const del = useCallback(async () => {\r\n    setSubmitting(true);\r\n    try {\r\n      await dispatch(DeletePermissionsThunk({ id: data?.id })).unwrap();\r\n    } catch (error) {\r\n      // error\r\n    }\r\n    setSubmitting(false);\r\n  }, [data?.id, dispatch]);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        onClick={() => setOpen(true)}\r\n        className=\"flex items-center justify-center cursor-pointer\"\r\n      >\r\n        <IconTrash className=\"text-red-400 size-5\" />\r\n      </div>\r\n      <Modal isOpen={open} onRequestClose={() => setOpen(false)} size=\"sm\">\r\n        <ModalTitle title=\"Delete Permission\" onClose={() => setOpen(false)} />\r\n        <p>\r\n          Are you sure you want to delete <br />\r\n          permission <b>{data?.name}</b>\r\n        </p>\r\n        <div className=\"flex justify-end pt-2 gap-2\">\r\n          <Button\r\n            outlined\r\n            disabled={isSubmitting}\r\n            onClick={() => setOpen(false)}\r\n            size=\"xsm\"\r\n            className=\"!rounded-full\"\r\n          >\r\n            No, thanks\r\n          </Button>\r\n          <Button\r\n            onClick={del}\r\n            disabled={isSubmitting}\r\n            size=\"xsm\"\r\n            className=\"!rounded-full\"\r\n            icon={isSubmitting && <IconCircle color=\"inherit\" size={16} />}\r\n          >\r\n            Yes, Delete\r\n          </Button>\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n","import Loader2 from \"@components/etc/loader2\";\r\nimport { customTableProps } from \"@components/table\";\r\nimport CheckRole from \"@components/etc/CheckRoles\";\r\nimport { Add, Delete, Edit } from \"./actions\";\r\n\r\nexport function List({ page, loading }: customTableProps<any>) {\r\n  if (loading)\r\n    return (\r\n      <div className=\"w-full flex justify-center\">\r\n        <Loader2 />\r\n      </div>\r\n    );\r\n  return (\r\n    <div className=\"grid gap-2 grid-cols-[repeat(auto-fill,_minmax(min(100%,15rem),1fr))]\">\r\n      <CheckRole permission=\"view_roles\">\r\n        {page.map((row) => (\r\n          <div key={row?.original?.id} className=\"py-3 px-4 rounded-md bg-light-grey bg-opacity-40\">\r\n            <p>{row?.original?.name}</p>\r\n            <small className=\"text-grey block pt-2\">{row?.original?.description}</small>\r\n            <div className=\"flex justify-end gap-2\">\r\n              <Delete data={row?.original} />\r\n              <Edit data={row?.original} />\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </CheckRole>\r\n      <CheckRole permission=\"create_roles\">\r\n        <Add />\r\n      </CheckRole>\r\n    </div>\r\n  );\r\n}\r\n","import { GetPermissionsThunk } from \"@/redux/features/actions/permissions\";\r\nimport DataTable, { ColumnType } from \"@components/table\";\r\nimport { useAppDispatch, useAppSelector } from \"@redux/hook\";\r\nimport { useCallback, useLayoutEffect, useMemo } from \"react\";\r\nimport { List } from \"./list\";\r\n\r\nexport default function DashPermissionsPage() {\r\n  const dispatch = useAppDispatch();\r\n  const { list, status, info } = useAppSelector((s) => s.permissions);\r\n\r\n  const columns = useMemo<ColumnType<any>[]>(\r\n    () => [\r\n      {\r\n        accessor: \"name\",\r\n        Header: \"name\",\r\n      },\r\n      {\r\n        accessor: \"description\",\r\n        Header: \"description\",\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const getData = useCallback(async () => {\r\n    try {\r\n      await dispatch(GetPermissionsThunk()).unwrap();\r\n    } catch (error: any) {\r\n      // error\r\n    }\r\n  }, [dispatch]);\r\n\r\n  useLayoutEffect(() => {\r\n    if (list.length == 0) getData();\r\n  }, [getData, list.length]);\r\n\r\n  return (\r\n    <div className=\"p-4 min-h-full\">\r\n      <DataTable\r\n        title=\"Permissions\"\r\n        columns={columns}\r\n        data={list}\r\n        // inline\r\n        loading={status == \"pending\"}\r\n        refresh={() => getData()}\r\n        hidePagination\r\n        defaultPageSize={100}\r\n        totalResults={info?.total}\r\n        CustomTable={(props) => <List {...props} />}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('circle', 'IconCircle', [\n  ['path', { d: 'M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0', key: 'svg-0' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('edit', 'IconEdit', [\n  [\n    'path',\n    {\n      d: 'M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1',\n      key: 'svg-0',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z',\n      key: 'svg-1',\n    },\n  ],\n  ['path', { d: 'M16 5l3 3', key: 'svg-2' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('new-section', 'IconNewSection', [\n  ['path', { d: 'M9 12l6 0', key: 'svg-0' }],\n  ['path', { d: 'M12 9l0 6', key: 'svg-1' }],\n  [\n    'path',\n    {\n      d: 'M4 6v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1m-5 0h-2m-5 0h-1a1 1 0 0 1 -1 -1v-1m0 -5v-2m0 -5',\n      key: 'svg-2',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('trash', 'IconTrash', [\n  ['path', { d: 'M4 7l16 0', key: 'svg-0' }],\n  ['path', { d: 'M10 11l0 6', key: 'svg-1' }],\n  ['path', { d: 'M14 11l0 6', key: 'svg-2' }],\n  [\n    'path',\n    { d: 'M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12', key: 'svg-3' },\n  ],\n  ['path', { d: 'M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3', key: 'svg-4' }],\n]);\n"],"names":["_ref","_allowedPermissions$l","_allowedPermissions$l2","_user$role","_user$role2","children","roles","permission","otherwise","fallback","props","good","bad","filterRoles","menuGood","menuBad","Array","isArray","user","status","allowedPermissions","useAppSelector","state","_jsx","Spin","list","some","r","includes","length","role","toLowerCase","Fragment","Modal","isOpen","onRequestClose","className","size","ReactModal","ModalTitle","_ref2","onClose","title","_jsxs","Button","onClick","Add","open","setOpen","useState","dispatch","useAppDispatch","submit","useCallback","async","values","setErrors","setStatus","setSubmitting","setTouched","resetForm","data","AddPermissionsThunk","unwrap","success","err","message","_Fragment","IconNewSection","Formik","initialValues","name","description","validationSchema","Yup","shape","max","required","min","onSubmit","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched","method","Input","label","placeholder","autoComplete","onChange","onBlur","value","error","isTouched","Boolean","type","outlined","disabled","icon","IconCircle","color","Edit","_ref3","_ref4","v","UpdatePermissionsThunk","id","IconEdit","_ref5","readOnly","Delete","_ref6","del","DeletePermissionsThunk","IconTrash","List","page","loading","Loader2","CheckRole","map","row","_row$original","_row$original2","_row$original3","original","DashPermissionsPage","info","s","permissions","columns","useMemo","accessor","Header","getData","GetPermissionsThunk","useLayoutEffect","DataTable","refresh","hidePagination","defaultPageSize","totalResults","total","CustomTable","createReactComponent","d","key"],"sourceRoot":""}