"use strict";(self.webpackChunkvuna_deile=self.webpackChunkvuna_deile||[]).push([[50],{7484:(e,a,s)=>{s.d(a,{A:()=>r,H:()=>o});var i=s(14710),l=s(76194),t=s(18062),n=s(91046);function o(e){let{children:a,className:s="",onClick:i}=e;return(0,n.jsx)("div",{className:`py-2 px-4 hover:bg-black hover:bg-opacity-5 ${s}`,onClick:i,children:a})}function r(e){let{children:a,positions:s,align:o,arrowColor:r,bordered:d,container:c,containerClassName:u,className:m=""}=e;const[v,h]=(0,i.useState)(!1);return(0,n.jsx)(t.Popover,{isOpen:v,positions:s||["left","right"],align:o||"center",padding:8,containerClassName:u,onClickOutside:e=>{e.target.closest(".ReactModalPortal")||h(!1)},content:e=>{let{position:s,childRect:i,popoverRect:l}=e;return(0,n.jsx)(t.ArrowContainer,{position:s,childRect:i,popoverRect:l,arrowColor:r||"#333",arrowSize:5,children:(0,n.jsx)("div",{className:`bg-slate-50 rounded-lg shadow-md !max-w-none min-w-44 overflow-auto ${d?"border border-solid border-blue-950 border-opacity-5":""} ${m}`,children:a})})},children:(0,n.jsx)("div",{onClick:()=>h(!v),className:"btn-container text-inherit",children:c||(0,n.jsx)(l.A,{size:"xsm3",className:"px-0 !border-transparent",outlined:!0,children:(0,n.jsx)("svg",{className:" min-w-[1.25rem] w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 4 15",children:(0,n.jsx)("path",{d:"M3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6.041a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 5.959a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})})})})})}},85620:(e,a,s)=>{s.r(a),s.d(a,{default:()=>F});var i=s(42215),l=s(14710),t=s(14206),n=s(4449),o=s.n(n),r=s(76194),d=s(94055),c=s(73887),u=s(94569),m=s(95834),v=s(28932),h=s(18345),p=s(86298),x=s(91046);function g(e){let{onFilter:a}=e;const{list:s,fetchTimes:t}=(0,i.G)((e=>e.products)),n=(0,i.j)();(0,l.useEffect)((()=>{t<1&&n((0,u.bn)({pageSize:1e3}))}),[n,t]);const[g,j]=(0,l.useState)([{startDate:new Date,endDate:new Date((new Date).getDate()+7),key:"selection"}]),b=(0,l.useCallback)((async(e,s)=>{let{setSubmitting:i}=s;null!==e&&void 0!==e&&e.to&&(e.to=o()(e.to).add("23"==o()(e.to).format("HH")?0:86369,"seconds").format("YYYY-MM-DD HH:mm")),null===a||void 0===a||a(e),i(!1)}),[a]);return(0,x.jsx)(h.l1,{initialValues:{search:"",from:"",to:"",radioId:"",submit:null},onSubmit:b,children:e=>{var a;let{values:i,isSubmitting:l,handleSubmit:t,handleChange:n,setValues:u}=e;return(0,x.jsxs)("form",{className:"grid gap-3",onSubmit:t,children:[(0,x.jsx)(d.pd,{name:"search",label:"Search",onChange:n,value:null===i||void 0===i?void 0:i.search,placeholder:"search"}),(0,x.jsxs)("div",{className:"hidden",children:[(0,x.jsx)(d.pd,{name:"from",type:"date",value:null===i||void 0===i?void 0:i.from,onChange:n}),(0,x.jsx)(d.pd,{name:"to",type:"date",value:null===i||void 0===i?void 0:i.to,onChange:n})]}),(0,x.jsx)(v.A,{mouseEnterDelay:.5,mouseLeaveDelay:.5,content:(0,x.jsx)(p.Ur,{onChange:e=>{let{selection:a}=e;j([a]),u((e=>({...e,from:o()(a.startDate).format("YYYY-MM-DD"),to:o()(a.endDate).format("YYYY-MM-DD")})))},moveRangeOnFirstSelection:!1,months:1,ranges:g,direction:"horizontal",preventSnapRefocus:!0,calendarFocus:"backwards",rangeColors:["var(--primary-color)"],maxDate:c.ZI,minDate:c.Py}),children:(0,x.jsxs)("div",{className:"cursor-pointer",children:[(0,x.jsx)("p",{className:"mb-1 text-grey",children:"Select Date Range"}),(0,x.jsxs)("span",{className:"flex gap-2 items-center [&>*]:text-center [&>*]:flex-grow [&>*]:p-1 [&>*]:px-3 [&>*]:bg-light-grey [&>*]:bg-opacity-30 [&>*]:rounded-md",children:[(0,x.jsx)("span",{children:null!==i&&void 0!==i&&i.from?o()(null===i||void 0===i?void 0:i.from).format("LL"):"Not Selected"}),"-",(0,x.jsx)("span",{children:null!==i&&void 0!==i&&i.to?o()(null===i||void 0===i?void 0:i.to).format("LL"):"Not Selected"})]})]})}),(0,x.jsx)(d.l6,{name:"radioId",label:"select Radio",value:null===i||void 0===i?void 0:i.radioId,onChange:n,placeholder:"All Radios",options:null===s||void 0===s||null===(a=s.map)||void 0===a?void 0:a.call(s,(e=>({value:null===e||void 0===e?void 0:e.id,text:null===e||void 0===e?void 0:e.name})))}),(0,x.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,x.jsx)(r.A,{type:"reset",outlined:!0,disabled:l,size:"xsm",className:"!rounded-full",children:"Reset"}),(0,x.jsx)(r.A,{type:"submit",disabled:l,size:"xsm",className:"!rounded-full",icon:l&&(0,x.jsx)(m.A,{size:16}),children:"Filter"})]})]})}})}var j=s(92109),b=s(79664),f=s(7484),y=s(78468),N=s(16330),w=(0,s(79).A)("radio-off","IconRadioOff",[["path",{d:"M14 3l-4.986 2m-2.875 1.15l-1.51 .604a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 .708 -.294m.292 -3.706v-8a1 1 0 0 0 -1 -1h-8m-4 0h-2.5",key:"svg-0"}],["path",{d:"M4 12h8m4 0h4",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M13 16v.01",key:"svg-3"}],["path",{d:"M3 3l18 18",key:"svg-4"}]]),C=s(94949);const S=e=>{let{files:a,values:s,onFileChange:i,onUrlChange:l}=e;return(0,x.jsxs)("div",{className:"flex flex-col w-1/2 border-r-2 justify-between",children:[(0,x.jsx)("input",{type:"file",onChange:i}),a.length>0&&(0,x.jsx)("img",{src:URL.createObjectURL(a[0]),alt:"Preview",className:" h-52 w-52"}),(0,x.jsxs)("div",{className:"flex flex-col p-1",children:[(0,x.jsx)("div",{children:"Or:"}),(0,x.jsx)("input",{type:"text",value:s.categoryPicture,onChange:e=>l(e.target.value),placeholder:"Enter image URL",className:"border p-3 rounded-lg"})]})]})};function A(){const[e,a]=(0,l.useState)(!1),[s,t]=(0,l.useState)(null),n=(0,i.j)(),o=e=>{var a;const s=null===(a=e.target.files)||void 0===a?void 0:a[0];t(s||null)},d=(0,l.useCallback)((async()=>{try{await n((0,j.Dj)({})).unwrap()}catch(e){}}),[n]),u=(0,l.useCallback)((async(e,i)=>{let{setErrors:l,setStatus:t,setSubmitting:o,resetForm:r}=i;try{let i=e.categoryPicture;if(s){i=(await(0,c.V6)(s)).url}console.log("Uploaded Image URL:",i);const l={...e,picture:i};await n((0,j.wp)(l)).unwrap(),await d(),o(!1),t({success:!0}),r(),a(!1)}catch(u){t({success:!1}),l({submit:u.message||"Something went wrong, please try again."}),o(!1)}}),[n,d,s]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.A,{onClick:()=>a(!0),className:"gap-2",size:"xsm",children:"Add Category"}),(0,x.jsxs)(N.A,{isOpen:e,onRequestClose:()=>a(!1),size:"sm",children:[(0,x.jsx)(N.w,{title:"Add Category",onClose:()=>a(!1)}),(0,x.jsx)(h.l1,{initialValues:{name:"",description:"",categoryPicture:"",submit:null},validationSchema:C.Ik().shape({name:C.Yj().max(50).required("Name is required"),description:C.Yj()}),onSubmit:u,children:e=>{let{errors:a,handleBlur:i,handleChange:l,handleSubmit:t,isSubmitting:n,values:d}=e;return(0,x.jsxs)("form",{className:"flex flex-row gap-4 justify-center",onSubmit:t,children:[a.submit&&(0,x.jsx)("p",{className:"text-red-500",children:a.submit}),(0,x.jsx)(S,{files:s?[s]:[],values:{categoryPicture:d.categoryPicture},onFileChange:o,onUrlChange:e=>l({target:{name:"categoryPicture",value:e}})}),(0,x.jsxs)("div",{className:"flex flex-col justify-between flex-1 gap-2",children:[(0,x.jsx)("input",{name:"name",placeholder:"Enter Name",onChange:l,onBlur:i,value:d.name,required:!0,className:"border p-3 rounded-xl"}),(0,x.jsx)("textarea",{name:"description",placeholder:"Enter Description",onChange:l,onBlur:i,value:d.description,className:"border p-3 rounded-xl"}),(0,x.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,x.jsx)(r.A,{type:"reset",outlined:!0,disabled:n,size:"xsm",children:"Cancel"}),(0,x.jsx)(r.A,{type:"submit",disabled:n,size:"xsm",children:"Add Category"})]})]})]})}})]})]})}function k(e){let{data:a}=e;const[s,t]=(0,l.useState)(!1),n=(0,i.j)(),o=(0,l.useCallback)((async()=>{try{await n((0,j.Dj)({})).unwrap()}catch(e){}}),[n]),c=(0,l.useCallback)((async(e,s)=>{let{setErrors:i,setStatus:l,setSubmitting:r,setTouched:d,resetForm:c}=s;try{const{submit:s,...i}=e;await n((0,j.HS)({data:i,id:null===a||void 0===a?void 0:a.id})).unwrap(),await o(),r(!1),l({success:!0}),d({}),c(),t(!1)}catch(u){l({success:!1}),i({submit:u.message||"Something went wrong, please try again."}),r(!1)}}),[null===a||void 0===a?void 0:a.id,n,o]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"px-4 py-2 hover:bg-black hover:bg-opacity-5",onClick:()=>t(!0),children:[(0,x.jsx)(b.qU,{className:"w-4"}),(0,x.jsx)("span",{className:"pl-3",children:"Edit"})]}),(0,x.jsxs)(N.A,{isOpen:s,onRequestClose:()=>t(!1),size:"sm",children:[(0,x.jsx)(N.w,{title:"Edit Radio",onClose:()=>t(!1)}),(0,x.jsx)(h.l1,{initialValues:{name:(null===a||void 0===a?void 0:a.name)||"",description:(null===a||void 0===a?void 0:a.description)||"",submit:null},validationSchema:C.Ik().shape({name:C.Yj().max(50).required("Name is required"),description:C.Yj()}),onSubmit:c,children:e=>{var a,s;let{errors:i,handleBlur:l,handleChange:t,handleSubmit:n,resetForm:o,isSubmitting:c,touched:u,values:v}=e;return(0,x.jsxs)("form",{method:"post",className:"flex flex-col gap-4 justify-center [&_input]:!rounded-xl",onSubmit:n,children:[i.submit?(0,x.jsx)("p",{className:"text-red-500 -my-2",children:i.submit}):(0,x.jsx)("p",{className:"text-transparent select-none -my-2",children:"error"}),(0,x.jsx)(d.pd,{name:"name",label:"Name",placeholder:"Enter Name",autoComplete:"name",onChange:t,onBlur:l,value:null===v||void 0===v?void 0:v.name,error:`${(null===i||void 0===i?void 0:i.name)||""}`,isTouched:Boolean(u.name),required:!0,boxClassName:"[&_input]:!rounded"}),(0,x.jsx)(d.TM,{name:"description",label:"Description",placeholder:"Enter Description",onChange:t,onBlur:l,value:v.description,error:null===(a=i.description)||void 0===a||null===(s=a.toString)||void 0===s?void 0:s.call(a),isTouched:Boolean(u.description),required:!0}),(0,x.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,x.jsx)(r.A,{outlined:!0,disabled:c,onClick:()=>o(),size:"xsm",className:"!rounded-full",children:"Reset"}),(0,x.jsx)(r.A,{type:"submit",disabled:c,size:"xsm",className:"!rounded-full",icon:c&&(0,x.jsx)(m.A,{color:"inherit",size:16}),children:"Edit Role"})]})]})}})]})]})}function D(e){let{data:a}=e;const[s,t]=(0,l.useState)(!1),[n,o]=(0,l.useState)(!1),d=(0,i.j)(),c=(0,l.useCallback)((async()=>{o(!0);try{console.log("disactivate"),await d((0,j.s6)({id:null===a||void 0===a?void 0:a.id})).unwrap(),t(!1)}catch(e){}o(!1)}),[null===a||void 0===a?void 0:a.id,d]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"px-4 py-2 flex items-center hover:bg-black hover:bg-opacity-5 text-red-400",onClick:()=>t(!0),children:[(0,x.jsx)(w,{className:"w-5"}),(0,x.jsx)("span",{className:"pl-2",children:"Disactivate"})]}),(0,x.jsxs)(N.A,{isOpen:s,onRequestClose:()=>t(!1),size:"sm",children:[(0,x.jsx)(N.w,{title:"Disactivate Radio",onClose:()=>t(!1)}),(0,x.jsxs)("p",{children:["Are you sure you want to Disactivate ",(0,x.jsx)("br",{}),"Radio ",(0,x.jsx)("b",{children:null===a||void 0===a?void 0:a.name})]}),(0,x.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,x.jsx)(r.A,{outlined:!0,disabled:n,onClick:()=>t(!1),size:"xsm",className:"!rounded-full",children:"No, thanks"}),(0,x.jsx)(r.A,{onClick:c,disabled:n,size:"xsm",className:"!rounded-full",icon:n&&(0,x.jsx)(m.A,{color:"inherit",size:16}),children:"Yes, Disactivate"})]})]})]})}function R(e){let{data:a}=e;const[s,t]=(0,l.useState)(!1),[n,o]=(0,l.useState)(!1),d=(0,i.j)(),c=(0,l.useCallback)((async()=>{o(!0);try{console.log("Activate"),await d((0,j.Ex)({id:null===a||void 0===a?void 0:a.id})).unwrap(),t(!1)}catch(e){}o(!1)}),[null===a||void 0===a?void 0:a.id,d]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"px-4 py-2 flex items-center hover:bg-black hover:bg-opacity-5 text-green-500",onClick:()=>t(!0),children:[(0,x.jsx)(w,{className:"w-5"}),(0,x.jsx)("span",{className:"pl-2",children:"Activate"})]}),(0,x.jsxs)(N.A,{isOpen:s,onRequestClose:()=>t(!1),size:"sm",children:[(0,x.jsx)(N.w,{title:"Activate Radio",onClose:()=>t(!1)}),(0,x.jsxs)("p",{children:["Are you sure you want to Activate ",(0,x.jsx)("br",{}),"Radio ",(0,x.jsx)("b",{children:null===a||void 0===a?void 0:a.name})]}),(0,x.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,x.jsx)(r.A,{outlined:!0,disabled:n,onClick:()=>t(!1),size:"xsm",className:"!rounded-full",children:"No, thanks"}),(0,x.jsx)(r.A,{onClick:c,disabled:n,size:"xsm",className:"!rounded-full",icon:n&&(0,x.jsx)(m.A,{color:"inherit",size:16}),children:"Yes, Activate"})]})]})]})}function z(e){var a;let{data:s}=e;return(0,x.jsxs)(f.A,{children:[(0,x.jsx)(y.A,{permission:["update_radio"],children:(0,x.jsx)(k,{data:null===s||void 0===s?void 0:s.original})}),(0,x.jsx)(y.A,{permission:["delete_roles"],children:"inactive"==(null===s||void 0===s||null===(a=s.original)||void 0===a?void 0:a.status)?(0,x.jsx)(R,{data:null===s||void 0===s?void 0:s.original}):(0,x.jsx)(D,{data:null===s||void 0===s?void 0:s.original})})]})}function F(){const e=(0,i.j)(),{list:a,status:s,info:n,fetchTimes:r}=(0,i.G)((e=>e.radio)),d=(0,l.useMemo)((()=>[{accessorFn:e=>e.name,header:"Name"},{accessorFn:e=>e.description,header:"Description"},{accessorFn:e=>e.status,header:"Status",cell:e=>{let{getValue:a}=e;const s=a();return(0,x.jsx)("span",{className:""+("active"==(null===s||void 0===s?void 0:s.toLowerCase())?"text-green-600":"text-red-600"),children:null===s||void 0===s?void 0:s.toLowerCase()})}},{accessorFn:e=>e.created_at,header:"Date",cell:e=>{let{getValue:a}=e;return o()(`${a()}`).format("LLL")}},{header:"Products",id:"products",cell:e=>{var a;let{row:{original:s}}=e;const i=null===s||void 0===s||null===(a=s.product)||void 0===a?void 0:a.length;return i?(0,x.jsxs)(x.Fragment,{children:[i," ",1==i?"Product":"Products"]}):"-"}},{header:"Actions",id:"actions",cell:e=>{let{row:a}=e;return(0,x.jsx)(z,{data:a})}}]),[]),c=(0,l.useCallback)((async a=>{let{type:s,options:i}=a;try{var l,t,n;const a={...null===i||void 0===i?void 0:i.filters,pageSize:(null===i||void 0===i?void 0:i.pagination)&&(null===i||void 0===i||null===(l=i.pagination)||void 0===l?void 0:l.pageSize)||10,pageNumber:(null===i||void 0===i?void 0:i.pagination)&&(null!==(t=null===i||void 0===i||null===(n=i.pagination)||void 0===n?void 0:n.pageNumber)&&void 0!==t?t:1)+1};if("export"==s){const s=await e((0,j.BP)(a)).unwrap();return null===s||void 0===s?void 0:s.list}{const s=await e((0,j.Dj)(a)).unwrap();return console.log("categories,",s),null===s||void 0===s?void 0:s.list}}catch(o){}}),[e]);return(0,l.useLayoutEffect)((()=>{0==r&&c({})}),[r,c,a.length]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"p-4",children:(0,x.jsx)(t.A,{title:"Radio",columns:d,data:a,getData:c,customPagination:!0,pagination:{totalPages:null===n||void 0===n?void 0:n.lastPage,pageNumber:((null===n||void 0===n?void 0:n.currentPage)||1)-1,pageSize:(null===a||void 0===a?void 0:a.length)<10?10:null===a||void 0===a?void 0:a.length,total:null===n||void 0===n?void 0:n.total},loading:"pending"==s,allowExport:!0,AsideNode:g,RightNode:()=>(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(A,{})})})})})}}}]);
//# sourceMappingURL=50.3412af11.chunk.js.map