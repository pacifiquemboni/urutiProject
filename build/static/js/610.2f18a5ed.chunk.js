"use strict";(self.webpackChunkvuna_deile=self.webpackChunkvuna_deile||[]).push([[610],{16330:(e,a,s)=>{s.d(a,{A:()=>r,w:()=>o});var t=s(62979),l=s.n(t),n=s(76194),i=s(91046);function r(e){let{children:a,isOpen:s,onRequestClose:t,className:n,size:r}=e;return(0,i.jsx)(l(),{isOpen:s,onRequestClose:t,className:`${r?`size_${r}`:""} ${n||""}`,children:a})}function o(e){let{onClose:a,title:s}=e;return(0,i.jsxs)("div",{className:"flex justify-between mb-4",children:["string"==typeof s?(0,i.jsx)("h3",{children:s}):s,(0,i.jsx)(n.A,{className:"!text-black !bg-transparent !p-0",size:"xsm2",onClick:()=>a(),children:"X"})]})}l().setAppElement("#modals")},73887:(e,a,s)=>{s.d(a,{Py:()=>n,V6:()=>i,ZI:()=>l});var t=s(72063);const l=new Date,n=new Date("2024-02-05");async function i(e){const a=new FormData;a.append("file",e),a.append("upload_preset","m0gzvc3m");const s=await t.A.post("https://api.cloudinary.com/v1_1/dibojibkz/image/upload",a);return null===s||void 0===s?void 0:s.data}},51610:(e,a,s)=>{s.r(a),s.d(a,{default:()=>b});var t=s(16330),l=s(99679),n=s(18340),i=s(42215),r=s(4449),o=s.n(r),d=s(14710),c=s(76194),u=s(94055),m=s(73887),h=s(95834),p=s(28932),v=s(18345),x=s(86298),g=s(91046);function f(e){let{onFilter:a}=e;const[s,t]=(0,d.useState)([{startDate:new Date,endDate:new Date((new Date).getDate()+7),key:"selection"}]),l=(0,d.useCallback)((async(e,s)=>{let{setSubmitting:t}=s;null===a||void 0===a||a(e),t(!1)}),[a]);return(0,g.jsx)(v.l1,{initialValues:{from:o()(s[0].startDate).format("YYYY-MM-DD"),to:o()(s[0].endDate).format("YYYY-MM-DD"),search:"",submit:null},onSubmit:l,children:e=>{let{values:a,isSubmitting:l,handleSubmit:n,handleChange:i,setValues:r}=e;return(0,g.jsxs)("form",{className:"grid gap-3",onSubmit:n,children:[(0,g.jsxs)("div",{className:"hidden",children:[(0,g.jsx)(u.pd,{name:"from",type:"date",value:null===a||void 0===a?void 0:a.from,onChange:i}),(0,g.jsx)(u.pd,{name:"to",type:"date",value:null===a||void 0===a?void 0:a.to,onChange:i})]}),(0,g.jsx)(p.A,{mouseEnterDelay:.5,mouseLeaveDelay:.5,content:(0,g.jsx)(x.Ur,{onChange:e=>{let{selection:a}=e;t([a]),r((e=>({...e,from:o()(a.startDate).format("YYYY-MM-DD"),to:o()(a.endDate).format("YYYY-MM-DD")})))},moveRangeOnFirstSelection:!1,months:1,ranges:s,direction:"horizontal",preventSnapRefocus:!0,calendarFocus:"backwards",rangeColors:["var(--primary-color)"],maxDate:m.ZI,minDate:m.Py}),children:(0,g.jsxs)("div",{className:"cursor-pointer",children:[(0,g.jsx)("p",{className:"mb-1 text-grey",children:"Select Date Range"}),(0,g.jsxs)("span",{className:"flex gap-2 items-center [&>*]:p-1 [&>*]:px-3 [&>*]:bg-light-grey [&>*]:bg-opacity-30 [&>*]:rounded-md",children:[(0,g.jsx)("span",{children:o()(s[0].startDate).format("LL")}),"-",(0,g.jsx)("span",{children:o()(s[0].endDate).format("LL")})]})]})}),(0,g.jsx)(u.pd,{name:"search",label:"Search",value:null===a||void 0===a?void 0:a.search,onChange:i,placeholder:"Search"}),(0,g.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,g.jsx)(c.A,{type:"reset",outlined:!0,disabled:l,size:"xsm",className:"!rounded-full",children:"Reset"}),(0,g.jsx)(c.A,{type:"submit",disabled:l,size:"xsm",className:"!rounded-full",icon:l&&(0,g.jsx)(h.A,{size:16}),children:"Filter"})]})]})}})}var j=s(85833);function b(){const e=(0,i.j)(),{list:a,status:s,fetchTimes:r,info:c}=(0,i.G)((e=>e.contacts)),[u,m]=(0,d.useState)(!1),[h,p]=(0,d.useState)(null),v=(0,d.useMemo)((()=>[{accessor:"name",Header:"name",Filter:()=>(0,g.jsx)(g.Fragment,{})},{accessor:"email",Header:"email"},{accessor:"message",Header:"message",Cell:e=>{let{value:a}=e;return(0,g.jsx)("p",{className:"line-clamp-1 text-wrap break-all !max-w-[45ch]",children:a})}},{accessor:"created_at",Header:"Send at",Cell:e=>{let{value:a}=e;return(0,g.jsxs)(g.Fragment,{children:[o()().diff(a,"weeks")>2?o()(a).format("ll"):`${o()(a).fromNow()},`," ",o()(a).format("LT")]})}}]),[]),x=(0,d.useCallback)((async a=>{try{await e((0,n._)(a)).unwrap()}catch(s){return{error:s}}}),[e]),b=(0,d.useCallback)((e=>{p(e),m(!0)}),[]),D=(0,d.useCallback)((()=>{m(!1),p(null)}),[]);(0,d.useLayoutEffect)((()=>{r<1&&x()}),[r,x]);const y=(0,d.useCallback)((e=>{x({pageNumber:((null===c||void 0===c?void 0:c.currentPage)||0)+(e||1)})}),[x,null===c||void 0===c?void 0:c.currentPage]),w=(0,d.useCallback)((async a=>{const s={...a,to:o()(null===a||void 0===a?void 0:a.to).add("23"==o()(null===a||void 0===a?void 0:a.to).format("HH")?0:86369,"seconds").format("YYYY-MM-DD HH:mm")},t=await x(s);null!==t&&void 0!==t&&t.error||e((0,j._F)(s))}),[e,x]);return(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsx)(l.A,{title:"Messages",columns:v,data:a,loading:"pending"==s,refresh:()=>x(),totalResults:null===c||void 0===c?void 0:c.total,hidePageSizeSelector:!0,hideSearch:!0,minimizeFilter:!0,onFilter:w,AsideNode:f,getMore:y,customPaginationActions:!0,currentPage:null===c||void 0===c?void 0:c.currentPage,onRowClick:e=>{let{row:{original:a}}=e;return b(a)},defaultSortBy:[{id:"created_at",desc:!0}]}),(0,g.jsxs)(t.A,{className:"max-w-[50ch]",size:"sm",isOpen:u,onRequestClose:D,children:[(0,g.jsx)(t.w,{title:(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{children:null===h||void 0===h?void 0:h.name}),(0,g.jsx)("small",{className:"text-grey",children:null===h||void 0===h?void 0:h.email})]}),onClose:D}),(0,g.jsxs)("div",{className:"max-w-[100%] grid gap-1",children:[(0,g.jsx)("p",{className:"p-2 px-3 rounded-md bg-light-grey bg-opacity-50",children:null===h||void 0===h?void 0:h.message}),(0,g.jsxs)("small",{className:"text-grey block w-full text-end",children:[o()(null===h||void 0===h?void 0:h.updated_at).fromNow(),", ",o()(null===h||void 0===h?void 0:h.updated_at).format("lll")]})]})]})]})}}}]);
//# sourceMappingURL=610.2f18a5ed.chunk.js.map